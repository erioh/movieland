<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="saveRateSql" class="java.lang.String">
        <constructor-arg value="insert into rating(movie_id, user_id, rating) values (:movieId, :userId, :rating);"/>
    </bean>
    <bean id="deleteUsersRateForMovieSql" class="java.lang.String">
        <constructor-arg value="delete from rating where movie_id = :movieId and user_id = :userId;"/>
    </bean>
    <bean id="getSumRatingWithCountOfRatedUsersSql" class="java.lang.String">
        <constructor-arg value="
select sum(rating) ratingSum, count(*) cnt from rating
where movie_id = :movieId
group by movie_id;
"/>
    </bean>
    <bean id="isRatingAddedSql" class="java.lang.String">
        <constructor-arg value="select count(*) from rating where movie_id = :movieId and user_id = :userId;"/>
    </bean>
    <bean id="updateRateForMovieSql" class="java.lang.String">
        <constructor-arg value="update movie set rating = :newRating where movie_id = :movieId;"/>
    </bean>

</beans>